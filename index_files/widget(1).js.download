(()=>{"use strict";var e,t=/bot|spider|crawl|http|lighthouse/i;const o="_one_click_popup",a=function(e){let t=27,o=5381,a=52711;for(;t--;){const r=e.charCodeAt(t);o=33*o^r,a=33*a^r}return 4096*(o>>>0)+(a>>>0)}("https://app.1clickpopup.com"),r=`one-click-popup-${a}`,n=`${o}_sessions_count`,i=`${o}_last_visited_path`,s=(e,t,o,a)=>{let r="",n="";if(o){let e=new Date;e.setTime(e.getTime()+60*o*1e3),r="; expires="+e.toUTCString()}a&&(n="; domain="+a),p().document.cookie=e+"="+escape(t)+r+n+"; path=/"},c=e=>{let t,o,a=e+"=",r=p().document.cookie.split(";");for(t=0;t<r.length;t++){for(o=r[t];" "===o.charAt(0);)o=o.substring(1,o.length);if(0===o.indexOf(a))return unescape(o.substring(a.length,o.length))}return null},p=()=>window.Shopify?window:window.parent,d=()=>Number(c(n));function l(e,t,o){if(navigator.sendBeacon){if(["Load failed","Failed to fetch","NetworkError when attempting to fetch resource."].indexOf(e.message)>=0)return;const a=new FormData;a.append("error",e.name+": "+e.message),a.append("caller",t),o&&a.append("popup_id",o.id),navigator.sendBeacon("https://app.1clickpopup.com/api/v1/front_end/error",a)}}function u(e,t){try{sessionStorage.setItem(e,t)}catch(e){}}(()=>{try{console.log("1ClickPopup widget loaded.");const h=e=>{try{const t=window[e],o="__storage_test__";return t.setItem(o,o),t.removeItem(o),!0}catch(e){return!1}},g=async(e,t)=>{try{if(!document.querySelector(`iframe#${r}`)){const o=await function(e,t){const o=[`shop=${window.Shopify.shop}`];return t&&Object.keys(t).forEach((e=>o.push(`${e}=${t[e]}`))),fetch(`https://app.1clickpopup.com/api/v1/front_end/${e}?${o.join("&")}`)}(e,t);if(o.ok){const e=await o.text(),t=document.createElement("iframe");t.id=r,t.srcdoc=e,t.title="1ClickPopup",t.style.position="fixed",t.style.left="0",t.style.bottom="0",t.style.height="0",t.style.width="0",t.style.zIndex="2147483647",t.style.border="none",document.body.appendChild(t)}}}catch(e){l(e,"app#loadFrame")}},m=()=>{try{g("",{new_visitor:1===d()})}catch(e){l(e,"app#loadPopups")}},w=e=>{try{g(`${e}/live_test`)}catch(e){l(e,"app#loadLiveTest")}},f=()=>{try{const g=h("localStorage")&&h("sessionStorage");if(!function(o){if(void 0===e)try{e=new RegExp(" daum[ /]| deusu/| yadirectfetcher|(?:^| )site|(?:^|[^g])news|(?<! (?:channel/|google/))google(?!(app|/google| pixel))|(?<! cu)bot(?:[^\\w]|_|$)|(?<! ya(?:yandex)?)search|(?<!(?:lib))http|(?<![hg]m)score|@[a-z]|\\(at\\)[a-z]|\\[at\\][a-z]|^12345|^<|^[\\w \\.\\-\\(?:\\):]+(?:/v?\\d+(\\.\\d+)?(?:\\.\\d{1,10})?)?(?:,|$)|^[^ ]{50,}$|^active|^ad muncher|^amaya|^anglesharp/|^avsdevicesdk/|^bidtellect/|^biglotron|^bot|^btwebclient/|^clamav[ /]|^client/|^cobweb/|^coccoc|^custom|^ddg[_-]android|^discourse|^dispatch/\\d|^downcast/|^duckduckgo|^facebook|^fdm[ /]\\d|^getright/|^gozilla/|^hatena|^hobbit|^hotzonu|^hwcdn/|^jeode/|^jetty/|^jigsaw|^linkdex|^metauri|^microsoft bits|^movabletype|^mozilla/\\d\\.\\d \\(compatible;?\\)$|^mozilla/\\d\\.\\d \\w*$|^navermailapp|^netsurf|^nuclei|^offline explorer|^php|^postman|^postrank|^python|^rank|^read|^reed|^rest|^serf|^snapchat|^space bison|^svn|^swcd |^taringa|^thumbor/|^tumblr/|^user-agent:|^valid|^venus/fedoraplanet|^w3c|^webbandit/|^webcopier|^wget|^whatsapp|^xenu link sleuth|^yahoo|^yandex|^zdm/\\d|^zoom marketplace/|^{{.*}}$|adbeat\\.com|appinsights|archive|ask jeeves/teoma|bit\\.ly/|bluecoat drtr|browsex|burpcollaborator|capture|catch|check|chrome-lighthouse|chromeframe|classifier|cloud|crawl|cryptoapi|dareboost|datanyze|dataprovider|dejaclick|dmbrowser|download|evc-batch/|feed|firephp|freesafeip|gomezagent|headless|httrack|hubspot marketing grader|hydra|ibisbrowser|images|inspect|iplabel|ips-agent|java(?!;)|library|mail\\.ru/|manager|monitor|neustar wpm|nutch|offbyone|optimize|pageburst|parser|perl|phantom|pingdom|powermarks|preview|proxy|ptst[ /]\\d|reader|reputation|resolver|retriever|rexx;|rigor|robot|rss|scan|scrape|server|sogou|sparkler/|speedcurve|spider|splash|statuscake|stumbleupon\\.com|supercleaner|synapse|synthetic|torrent|trace|transcoder|twingly recon|url|virtuoso|wappalyzer|webglance|webkit2png|whatcms/|wordpress|zgrab","i")}catch(o){e=t}return Boolean(o)&&e.test(o)}(navigator.userAgent)&&g){const e=window.location,t=new URL(e).searchParams,h=t.get("1cp_live_test"),g=t.get("1cp_skip_country_targeting");if(h){const[e,t,r]=atob(h).split("_");if("https://app.1clickpopup.com"===e&&(new Date-new Date(t))/6e4<30){const e={id:r};(e=>c(`${o}_${e.id}_countdown_time`))(e)&&((e,t)=>{s(`${o}_${e.id}_countdown_time`,"",525600)})(e),["preview_last_seen","preview_suppressed","preview_discount_code","preview_discount_bar_suppressed"].forEach((t=>function(e,t){localStorage.removeItem(`${function(e){return`${o}_${e.token||e.id}`}(e)}_${t}`)}(e,t))),u(`${o}_${a}_live_test`,JSON.stringify({id:r,skipCountryTargeting:!!g}))}}const f=sessionStorage.getItem(`${o}_${a}_live_test`);if(f){const e=JSON.parse(f);w(e.id)}else{const t=localStorage.getItem(`${o}_last_visited`);r=!t||Math.round((new Date-new Date(t))/6e4)>30?d()+1:d(),s(n,r,43800),function(e,t){try{localStorage.setItem(e,t)}catch(e){}}(`${o}_last_visited`,(new Date).toISOString()),window.addEventListener("pagehide",(()=>{try{s(i,(()=>{const{origin:e,pathname:t}=p().location;return e+t})(),30),u(`${o}_last_visited_page`,e.href)}catch(e){l(e,"app#window.addEventListener('pagehide')")}})),m()}}}catch(e){l(e,"app#perform")}var r};"loading"===document.readyState?document.addEventListener("DOMContentLoaded",f):f(),window.addEventListener("pageshow",(e=>{try{e.persisted&&f()}catch(e){l(e,"app#pageshow")}}))}catch(e){l(e,"app")}})()})();